<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml"> <head> <meta charset="utf-8"> <title>Cl-Spidev</title> <meta name="viewport" content="width=device-width"> <meta name="description" content="A library for the Linux SPIDEV kernel module as used on hobby kits such as the Raspberry Pi"> <meta name="author" content="Nicolas Hafner &lt;shinmera@tymoon.eu&gt;"> <style type="text/css"> body{
          max-width: 1024px;
          margin: 0 auto 0 auto;
          font-family: sans-serif;
          color: #333333;
          font-size: 14pt;
          padding: 5px;
      }
      body>header{
          display:flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          max-width: 100%;
          text-align: center;
      }
      body>header img{
          max-width: 50%;
      }
      img{
          max-width: 100%;
          max-height: 100%;
      }
      code{
          font-family: Consolas, Inconsolata, monospace;
      }
      a{
          text-decoration: none;
          color: #0055AA;
      }
      a img{
          border: none;
      }
      #documentation{
          text-align: justify;
      }
      #documentation pre{
          margin-left: 20px;
          overflow: auto;
      }
      #documentation img{
          margin: 5px;
      }
      #symbol-index>ul{
          list-style: none;
          padding: 0;
      }
      #symbol-index .package>ul{
          list-style: none;
          padding: 0 0 0 10px;
      }
      #symbol-index .package .nicknames{
          font-weight: normal;
      }
      #symbol-index .package h4{
          display: inline-block;
          margin: 0;
      }
      #symbol-index .package article{
          margin: 0 0 15px 0;
      }
      #symbol-index .package article header{
          font-size: 1.2em;
          font-weight: normal;
      }
      #symbol-index .package .name{
          margin-right: 5px;
      }
      #symbol-index .package .docstring{
          margin: 0 0 0 15px;
          white-space: pre-wrap;
          font-size: 12pt;
      }
      @media (max-width: 800px){
          body{font-size: 12pt;}
      } </style> </head> <body> <header> <h1>cl-spidev</h1> <span class="version">1.1.0</span> <p class="description">A library for the Linux SPIDEV kernel module as used on hobby kits such as the Raspberry Pi</p> </header> <main> <article id="documentation">  <div><h2 id="about_cl-spidev">About cl-spidev</h2> <p>This is a bindings library for the Linux SPIDEV kernel module as described on <a href="https://www.kernel.org/doc/Documentation/spi/spidev">https://www.kernel.org/doc/Documentation/spi/spidev</a>. It provides both direct low-level, and high-level convenient access.</p> <h2 id="how_to">How To</h2> <p>List all the available SPIDEV devices.</p> <pre><code>(<a href="#CL-SPIDEV-LLI:DEVICES">spidev:devices</a>)</code></pre> <p>Create a handle object to one of them.</p> <pre><code>(<a href="http://l1sp.org/cl/defvar">defvar</a> *handle* (<a href="#CL-SPIDEV:OPEN">spidev:open</a> &quot;0.0&quot;))</code></pre> <p>You can then read out the current information of the device.</p> <pre><code>(<a href="#CL-SPIDEV-LLI:MODE">spidev:mode</a> *handle*)
(<a href="#CL-SPIDEV-LLI:LSB-FIRST">spidev:lsb-first</a> *handle*)
(<a href="#CL-SPIDEV-LLI:BITS/WORD">spidev:bits/word</a> *handle*)
(<a href="#CL-SPIDEV-LLI:MAX-SPEED">spidev:max-speed</a> *handle*)</code></pre> <p>You can also set the above places to the values you need them to be. See the respective docstrings.</p> <p>Finally you can read from and write to the device.</p> <pre><code>(<a href="#CL-SPIDEV:READ*">spidev:read*</a> 12 *handle*)
(<a href="#CL-SPIDEV:WRITE*">spidev:write*</a> *handle* 1 2 3 4)</code></pre> <p>Once you are done you can either close the handle explicitly...</p> <pre><code>(<a href="#CL-SPIDEV:CLOSE">spidev:close</a> *handle*)</code></pre> <p>Or simply lose all references to it and wait for the GC to take care of it for you. Either way, it should be safe.</p> </div>  </article> <article id="copyright">  <h2>Copyright</h2> <span>cl-spidev</span> is licensed under the <span><a href="https://tldrlegal.com/search?q=Artistic">Artistic</a></span> license.  Â© <span>Nicolas Hafner &lt;shinmera@tymoon.eu&gt;</span> .  This library can be obtained on <a href="https://github.com/Shinmera/cl-spidev">https://github.com/Shinmera/cl-spidev</a>.  </article>  <article id="symbol-index"> <h2>Package Index</h2> <ul><li class="package"> <h3> <a name="CL-SPIDEV-LLI" href="#CL-SPIDEV-LLI">CL-SPIDEV-LLI</a> <span class="nicknames">(ORG.SHIRAKUMO.SPIDEV.LLI)</span> </h3> <ul><li> <a name="CL-SPIDEV-LLI:SPI-3WIRE"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-3WIRE"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-3WIRE">SPI-3WIRE</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_3WIRE.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-CPOL"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-CPOL"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-CPOL">SPI-CPOL</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_CPOL.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-CS-HIGH"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-CS-HIGH"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-CS-HIGH">SPI-CS-HIGH</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_CS_HIGH.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-MESSAGE-1"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-MESSAGE-1"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-MESSAGE-1">SPI-IOC-MESSAGE-1</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_MESSAGE(1).</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-RD-BITS-PER-WORD"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-RD-BITS-PER-WORD"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-RD-BITS-PER-WORD">SPI-IOC-RD-BITS-PER-WORD</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_RD_BITS_PER_WORD.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-RD-LSB-FIRST"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-RD-LSB-FIRST"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-RD-LSB-FIRST">SPI-IOC-RD-LSB-FIRST</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_RD_LSB_FIRST.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-RD-MAX-SPEED-HZ"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-RD-MAX-SPEED-HZ"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-RD-MAX-SPEED-HZ">SPI-IOC-RD-MAX-SPEED-HZ</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_RD_MAX_SPEED_HZ.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-RD-MODE"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-RD-MODE"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-RD-MODE">SPI-IOC-RD-MODE</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_RD_MODE.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-RD-MODE32"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-RD-MODE32"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-RD-MODE32">SPI-IOC-RD-MODE32</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_RD_MODE32.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-WR-BITS-PER-WORD"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-WR-BITS-PER-WORD"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-WR-BITS-PER-WORD">SPI-IOC-WR-BITS-PER-WORD</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_WR_BITS_PER_WORD.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-WR-LSB-FIRST"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-WR-LSB-FIRST"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-WR-LSB-FIRST">SPI-IOC-WR-LSB-FIRST</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_WR_LSB_FIRST.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-WR-MAX-SPEED-HZ"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-WR-MAX-SPEED-HZ"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-WR-MAX-SPEED-HZ">SPI-IOC-WR-MAX-SPEED-HZ</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_WR_MAX_SPEED_HZ.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-WR-MODE"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-WR-MODE"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-WR-MODE">SPI-IOC-WR-MODE</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_WR_MODE.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-IOC-WR-MODE32"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-IOC-WR-MODE32"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-IOC-WR-MODE32">SPI-IOC-WR-MODE32</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_IOC_WR_MODE32.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-LOOP"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-LOOP"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-LOOP">SPI-LOOP</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_LOOP.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-LSB-FIRST"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-LSB-FIRST"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-LSB-FIRST">SPI-LSB-FIRST</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_LSB_FIRST.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-MODE-0"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-MODE-0"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-MODE-0">SPI-MODE-0</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_MODE_0.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-MODE-1"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-MODE-1"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-MODE-1">SPI-MODE-1</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_MODE_1.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-MODE-2"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-MODE-2"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-MODE-2">SPI-MODE-2</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_MODE_2.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-MODE-3"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-MODE-3"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-MODE-3">SPI-MODE-3</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_MODE_3.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-NO-CS"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-NO-CS"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-NO-CS">SPI-NO-CS</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_NO_CS.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-READY"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-READY"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-READY">SPI-READY</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_READY.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-RX-DUAL"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-RX-DUAL"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-RX-DUAL">SPI-RX-DUAL</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_RX_DUAL.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-RX-QUAD"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-RX-QUAD"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-RX-QUAD">SPI-RX-QUAD</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_RX_QUAD.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-TX-DUAL"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-TX-DUAL"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-TX-DUAL">SPI-TX-DUAL</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_TX_DUAL.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:SPI-TX-QUAD"> </a> <article id="CONSTANT CL-SPIDEV-LLI:SPI-TX-QUAD"> <header class="constant"> <span class="type">constant</span>  <h4 class="name"><code><a href="#CONSTANT%20CL-SPIDEV-LLI%3ASPI-TX-QUAD">SPI-TX-QUAD</a></code></h4>  </header> <div class="docstring"><pre>Constant holding the value defined in the kernel constant SPI_TX_QUAD.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:*SPIDEV-ROOT*"> </a> <article id="SPECIAL CL-SPIDEV-LLI:*SPIDEV-ROOT*"> <header class="special"> <span class="type">special</span>  <h4 class="name"><code><a href="#SPECIAL%20CL-SPIDEV-LLI%3A%2ASPIDEV-ROOT%2A">*SPIDEV-ROOT*</a></code></h4>  </header> <div class="docstring"><pre>The root path for SPIDEV devices.
Should be /dev/</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:BITS/WORD"> </a> <article id="ACCESSOR CL-SPIDEV-LLI:BITS/WORD"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV-LLI%3ABITS%2FWORD">BITS/WORD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to how many bits there are per word on the SPIDEV device.

The value should be a positive integer, where 0 defaults to 8.

See <a href="NIL">IOCTL</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-RD-BITS-PER-WORD">SPI-IOC-RD-BITS-PER-WORD</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-WR-BITS-PER-WORD">SPI-IOC-WR-BITS-PER-WORD</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:LSB-FIRST"> </a> <article id="ACCESSOR CL-SPIDEV-LLI:LSB-FIRST"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV-LLI%3ALSB-FIRST">LSB-FIRST</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to whether the least significant byte comes first on the SPIDEV device.

The value should be T or NIL.

See <a href="NIL">IOCTL</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-RD-LSB-FIRST">SPI-IOC-RD-LSB-FIRST</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-WR-LSB-FIRST">SPI-IOC-WR-LSB-FIRST</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:MAX-SPEED"> </a> <article id="ACCESSOR CL-SPIDEV-LLI:MAX-SPEED"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV-LLI%3AMAX-SPEED">MAX-SPEED</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the maximum speed frequency of the SPIDEV device in Hertz.

The value should be a positive integer. If it is too large and
the device refuses to adjust to it, a warning is signalled.

The actual rate in Hertz is returned.

See <a href="NIL">IOCTL</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-RD-MAX-SPEED-HZ">SPI-IOC-RD-MAX-SPEED-HZ</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-WR-MAX-SPEED-HZ">SPI-IOC-WR-MAX-SPEED-HZ</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:MODE"> </a> <article id="ACCESSOR CL-SPIDEV-LLI:MODE"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV-LLI%3AMODE">MODE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the mode in which the SPIDEV device operates.

The value should be one of :MODE-0 :MODE-1 :MODE-2 :MODE-3 or
a specific mode integer.

See <a href="NIL">IOCTL</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-WR-MODE32">SPI-IOC-WR-MODE32</a>
See <a href="#CL-SPIDEV-LLI:SPI-IOC-RD-MODE32">SPI-IOC-RD-MODE32</a>
See <a href="#CL-SPIDEV-LLI:SPI-MODE-0">SPI-MODE-0</a>
See <a href="#CL-SPIDEV-LLI:SPI-MODE-1">SPI-MODE-1</a>
See <a href="#CL-SPIDEV-LLI:SPI-MODE-2">SPI-MODE-2</a>
See <a href="#CL-SPIDEV-LLI:SPI-MODE-3">SPI-MODE-3</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:CLOSE-SPI"> </a> <article id="FUNCTION CL-SPIDEV-LLI:CLOSE-SPI"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV-LLI%3ACLOSE-SPI">CLOSE-SPI</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE</code><code>)</code>  </header> <div class="docstring"><pre>Close a handle to a SPIDEV device.

See <a href="#CL-SPIDEV-LLI:WITH-OPEN-SPI">WITH-OPEN-SPI</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:DEVICES"> </a> <article id="FUNCTION CL-SPIDEV-LLI:DEVICES"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV-LLI%3ADEVICES">DEVICES</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <div class="docstring"><pre>Return a list of available SPIDEV devices on the system.</pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:OPEN-SPI"> </a> <article id="FUNCTION CL-SPIDEV-LLI:OPEN-SPI"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV-LLI%3AOPEN-SPI">OPEN-SPI</a></code></h4> <code class="qualifiers"></code> <code class="arguments">ID &amp;KEY (DIRECTION :IO)</code><code>)</code>  </header> <div class="docstring"><pre>Open a handle to a SPIDEV device.

See <a href="#CL-SPIDEV-LLI:WITH-OPEN-SPI">WITH-OPEN-SPI</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:READ-BYTES"> </a> <article id="FUNCTION CL-SPIDEV-LLI:READ-BYTES"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV-LLI%3AREAD-BYTES">READ-BYTES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">BYTES HANDLE &amp;KEY (START 0) END</code><code>)</code>  </header> <div class="docstring"><pre>Reads a byte sequence from the SPIDEV device handle.

See <a href="#CL-SPIDEV-LLI:LSB-FIRST">LSB-FIRST</a>
See <a href="#CL-SPIDEV-LLI:BITS/WORD">BITS/WORD</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:TRANSMIT"> </a> <article id="FUNCTION CL-SPIDEV-LLI:TRANSMIT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV-LLI%3ATRANSMIT">TRANSMIT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE BYTES SPEED-HZ DELAY-USECS BITS/WORD</code><code>)</code>  </header> <div class="docstring"><pre>Perform a SPI transmission of the given byte sequence.

The array must be an unsigned-byte 8 array that is sharable.
On most implementations that matter this will correspond to
any simple-vector with element-type unsigned-byte 8.

The speed-hz, delay-usecs, and bits/word parameters are temp
overrides for the device configuration during the transmission.

Returned is a fresh vector of the same length as the bytes
vector, containing the contents of the read buffer of the
transmission.

See <a href="NIL">CFFI:MAKE-SHAREABLE-BYTE-VECTOR</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:WRITE-BYTES"> </a> <article id="FUNCTION CL-SPIDEV-LLI:WRITE-BYTES"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV-LLI%3AWRITE-BYTES">WRITE-BYTES</a></code></h4> <code class="qualifiers"></code> <code class="arguments">BYTES HANDLE &amp;KEY (START 0) END</code><code>)</code>  </header> <div class="docstring"><pre>Writes the byte sequence to the SPIDEV device handle.

See <a href="#CL-SPIDEV-LLI:LSB-FIRST">LSB-FIRST</a>
See <a href="#CL-SPIDEV-LLI:BITS/WORD">BITS/WORD</a></pre></div> </article> </li><li> <a name="CL-SPIDEV-LLI:WITH-OPEN-SPI"> </a> <article id="MACRO CL-SPIDEV-LLI:WITH-OPEN-SPI"> <header class="macro"> <span class="type">macro</span>  <code>(</code><h4 class="name"><code><a href="#MACRO%20CL-SPIDEV-LLI%3AWITH-OPEN-SPI">WITH-OPEN-SPI</a></code></h4> <code class="qualifiers"></code> <code class="arguments">(HANDLE ID &amp;KEY (DIRECTION)) &amp;BODY BODY</code><code>)</code>  </header> <div class="docstring"><pre>Convenience wrapper to lexically retain a handle to a SPIDEV device.

See <a href="#CL-SPIDEV-LLI:OPEN-SPI">OPEN-SPI</a>
See <a href="#CL-SPIDEV-LLI:CLOSE-SPI">CLOSE-SPI</a></pre></div> </article> </li></ul> </li><li class="package"> <h3> <a name="CL-SPIDEV" href="#CL-SPIDEV">CL-SPIDEV</a> <span class="nicknames">(SPIDEV ORG.SHIRAKUMO.SPIDEV)</span> </h3> <ul><li> <a name="CL-SPIDEV:HANDLE"> </a> <article id="CLASS CL-SPIDEV:HANDLE"> <header class="class"> <span class="type">class</span>  <h4 class="name"><code><a href="#CLASS%20CL-SPIDEV%3AHANDLE">HANDLE</a></code></h4>  </header> <div class="docstring"><pre>Struct to wrap a handle to a SPIDEV device and all of its associated information.

See <a href="#CL-SPIDEV:OPEN">OPEN</a>
See <a href="#CL-SPIDEV:CLOSE">CLOSE</a>
See <a href="#CL-SPIDEV:HANDLE">HANDLE</a>
See <a href="#CL-SPIDEV-LLI:MODE">MODE</a>
See <a href="#CL-SPIDEV-LLI:LSB-FIRST">LSB-FIRST</a>
See <a href="#CL-SPIDEV-LLI:BITS/WORD">BITS/WORD</a>
See <a href="#CL-SPIDEV-LLI:MAX-SPEED">MAX-SPEED</a>
See <a href="#CL-SPIDEV:READ">READ</a>
See <a href="#CL-SPIDEV:READ*">READ*</a>
See <a href="#CL-SPIDEV:WRITE">WRITE</a>
See <a href="#CL-SPIDEV:WRITE*">WRITE*</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:BITS/WORD"> </a> <article id="ACCESSOR CL-SPIDEV:BITS/WORD"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV%3ABITS%2FWORD">BITS/WORD</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to how many bits there are in a word on the device.

Should be an (UNSIGNED-BYTE 8) value.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:LSB-FIRST"> </a> <article id="ACCESSOR CL-SPIDEV:LSB-FIRST"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV%3ALSB-FIRST">LSB-FIRST</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to whether the least significant byte comes first.

Should be a boolean.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:MAX-SPEED"> </a> <article id="ACCESSOR CL-SPIDEV:MAX-SPEED"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV%3AMAX-SPEED">MAX-SPEED</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the maximum transfer speed of the SPIDEV device in Hertz.

Should be an (UNSIGNED-BYTE 32) value.
The device may reject your requested speed, in which case a
warning is signalled and the actual speed is returned.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:MODE"> </a> <article id="ACCESSOR CL-SPIDEV:MODE"> <header class="accessor"> <span class="type">accessor</span>  <code>(</code><h4 class="name"><code><a href="#ACCESSOR%20CL-SPIDEV%3AMODE">MODE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Accessor to the SPIDEV device's transfer mode.

The value should be one of :MODE-0 :MODE-1 :MODE-2 :MODE-3

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:CLOSE"> </a> <article id="FUNCTION CL-SPIDEV:CLOSE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3ACLOSE">CLOSE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE</code><code>)</code>  </header> <div class="docstring"><pre>Safely closes the SPIDEV device. It becomes unusable after this.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:DEVICES"> </a> <article id="FUNCTION CL-SPIDEV:DEVICES"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3ADEVICES">DEVICES</a></code></h4> <code class="qualifiers"></code> <code class="arguments"></code><code>)</code>  </header> <div class="docstring"><pre>Return a list of available SPIDEV devices on the system.</pre></div> </article> </li><li> <a name="CL-SPIDEV:HANDLE"> </a> <article id="FUNCTION CL-SPIDEV:HANDLE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3AHANDLE">HANDLE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">INSTANCE</code><code>)</code>  </header> <div class="docstring"><pre>Returns the underlying stream handle of the handle object.

This is useful when you need to interact with the low-level
system directly for some reason.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:OPEN"> </a> <article id="FUNCTION CL-SPIDEV:OPEN"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3AOPEN">OPEN</a></code></h4> <code class="qualifiers"></code> <code class="arguments">ID</code><code>)</code>  </header> <div class="docstring"><pre>Open a handle to a SPIDEV device.

This will produce a safe object that will always ensure the
underlying file-system handle is closed when the object is
no longer referenced. It will also cache the properties of
the underlying device, so read access to them should be fast.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:READ"> </a> <article id="FUNCTION CL-SPIDEV:READ"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3AREAD">READ</a></code></h4> <code class="qualifiers"></code> <code class="arguments">BYTES HANDLE &amp;KEY (START 0) END</code><code>)</code>  </header> <div class="docstring"><pre>Read a sequence of words from the SPIDEV device.

The bytes vector should be able to contain unsigned-bytes of
size up to the number of BITS/WORD of the handle.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a>
See <a href="#CL-SPIDEV:READ*">READ*</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:READ*"> </a> <article id="FUNCTION CL-SPIDEV:READ*"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3AREAD%2A">READ*</a></code></h4> <code class="qualifiers"></code> <code class="arguments">N HANDLE</code><code>)</code>  </header> <div class="docstring"><pre>Read n words from the SPIDEV device into a fresh array.

See <a href="#CL-SPIDEV:READ">READ</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:TRANSMIT"> </a> <article id="FUNCTION CL-SPIDEV:TRANSMIT"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3ATRANSMIT">TRANSMIT</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE BYTES &amp;KEY SPEED DELAY BITS/WORD</code><code>)</code>  </header> <div class="docstring"><pre>Perform a SPI transmission of the given byte sequence.

The array must be an unsigned-byte 8 array.

The speed-hz, delay-usecs, and bits/word parameters are temp
overrides for the device configuration during the transmission.
They default to MAX-SPEED, 0, and BITS/WORD respectively.

Returned is a fresh vector of the same length as the bytes
vector, containing the contents of the read buffer of the
transmission.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a>
See <a href="#CL-SPIDEV-LLI:MAX-SPEED">MAX-SPEED</a>
See <a href="#CL-SPIDEV-LLI:BITS/WORD">BITS/WORD</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:WRITE"> </a> <article id="FUNCTION CL-SPIDEV:WRITE"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3AWRITE">WRITE</a></code></h4> <code class="qualifiers"></code> <code class="arguments">BYTES HANDLE &amp;KEY (START 0) END</code><code>)</code>  </header> <div class="docstring"><pre>Write a sequence of words to the SPIDEV device.

The bytes vector should contain unsigned-bytes of size up to
the number of BITS/WORD of the handle.

The bytes written are automatically flushed to the spi device
handle, so that when WRITE returns, the operation should have
completed. If you need to manually control flushing or need
to write in much smaller intervals, please refer to the low-
level interface.

See <a href="#CL-SPIDEV:HANDLE">HANDLE</a>
See <a href="#CL-SPIDEV:WRITE*">WRITE*</a></pre></div> </article> </li><li> <a name="CL-SPIDEV:WRITE*"> </a> <article id="FUNCTION CL-SPIDEV:WRITE*"> <header class="function"> <span class="type">function</span>  <code>(</code><h4 class="name"><code><a href="#FUNCTION%20CL-SPIDEV%3AWRITE%2A">WRITE*</a></code></h4> <code class="qualifiers"></code> <code class="arguments">HANDLE &amp;REST BYTES</code><code>)</code>  </header> <div class="docstring"><pre>Writes the bytes in the arguments list to the SPIDEV device.

See <a href="#CL-SPIDEV:WRITE">WRITE</a></pre></div> </article> </li></ul> </li></ul> </article>  </main> </body> </html> 